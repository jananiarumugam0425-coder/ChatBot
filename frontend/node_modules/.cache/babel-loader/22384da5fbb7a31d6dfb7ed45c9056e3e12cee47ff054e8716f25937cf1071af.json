{"ast":null,"code":"var _jsxFileName = \"E:\\\\Employee Timesheet chatbot\\\\frontend\\\\src\\\\components\\\\ChatPage\\\\ChatPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './ChatPage.css';\nimport ChatMessage from '../ChatMessage/ChatMessage';\nimport UploadButton from '../UploadButton/UploadButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://127.0.0.1:5000';\nconst ChatPage = ({\n  user,\n  sessionToken,\n  onSignOut\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const chatEndRef = useRef(null);\n\n  // Scroll to the bottom of the chat area when messages change\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // Fetch chat history on component mount\n  useEffect(() => {\n    if (sessionToken) {\n      fetchChatHistory();\n    }\n  }, [sessionToken]);\n  const fetchChatHistory = async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/chat_history`, {\n        headers: {\n          'Authorization': `Bearer ${sessionToken}`\n        }\n      });\n      if (response.status === 401) {\n        onSignOut();\n        return;\n      }\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch history.\");\n      }\n      const data = await response.json();\n      setMessages(data.history || []);\n    } catch (error) {\n      console.error(\"Error fetching chat history:\", error);\n      setError(\"Could not load chat history.\");\n    }\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    const userQuery = input.trim();\n    if (!userQuery || isLoading || !sessionToken) return;\n    setIsLoading(true);\n    setInput('');\n    setError('');\n    const newMessage = {\n      sender: 'user',\n      text: userQuery,\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, newMessage]);\n    try {\n      const response = await fetch(`${API_BASE_URL}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${sessionToken}`\n        },\n        body: JSON.stringify({\n          query: userQuery,\n          timestamp: newMessage.timestamp\n        })\n      });\n      if (response.status === 401) {\n        onSignOut();\n        return;\n      }\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to get response from chatbot.');\n      }\n      const botMessage = {\n        sender: 'bot',\n        text: data.answer,\n        timestamp: new Date().toISOString()\n      };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      console.error(err);\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleFileUpload = async file => {\n    if (isLoading || !sessionToken) return;\n    setIsLoading(true);\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const response = await fetch(`${API_BASE_URL}/upload`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${sessionToken}`\n        },\n        body: formData\n      });\n      if (response.status === 401) {\n        onSignOut();\n        return;\n      }\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'File upload failed.');\n      }\n      const botMessage = {\n        sender: 'bot',\n        text: data.message,\n        timestamp: new Date().toISOString()\n      };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      console.error(err);\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"chat-title\",\n          children: \"Timesheet Chatbot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-info\",\n            children: [\"Logged in as: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 67\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onSignOut,\n            className: \"signout-button\",\n            children: \"Sign Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"chat-messages\",\n        children: [messages.length === 0 && !isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome-message\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Hello **\", user, \"**! Welcome to the Timesheet Chatbot. Upload a CSV file to begin asking questions about your data.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this) : messages.map((msg, index) => /*#__PURE__*/_jsxDEV(ChatMessage, {\n          sender: msg.sender,\n          text: msg.text\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 29\n        }, this)), isLoading && /*#__PURE__*/_jsxDEV(ChatMessage, {\n          sender: \"bot\",\n          text: \"Thinking...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: chatEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"chat-footer\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-input-form\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(UploadButton, {\n            onFileUpload: handleFileUpload,\n            disabled: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessage,\n            className: \"chat-input-form-inner\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: isLoading ? \"Processing, please wait...\" : \"Ask a question about the timesheet...\",\n              className: \"chat-input\",\n              value: input,\n              onChange: e => setInput(e.target.value),\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"send-button\",\n              disabled: !input.trim() || isLoading,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                strokeWidth: \"2\",\n                stroke: \"currentColor\",\n                style: {\n                  width: '20px',\n                  height: '20px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  d: \"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatPage, \"XAHF3kH7F7haVWZr6phcRhnMPo8=\");\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ChatMessage","UploadButton","jsxDEV","_jsxDEV","API_BASE_URL","ChatPage","user","sessionToken","onSignOut","_s","messages","setMessages","input","setInput","isLoading","setIsLoading","error","setError","chatEndRef","_chatEndRef$current","current","scrollIntoView","behavior","fetchChatHistory","response","fetch","headers","status","ok","Error","data","json","history","console","handleSendMessage","e","preventDefault","userQuery","trim","newMessage","sender","text","timestamp","Date","toISOString","prev","method","body","JSON","stringify","query","botMessage","answer","err","message","handleFileUpload","file","formData","FormData","append","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","msg","index","ref","onFileUpload","disabled","onSubmit","type","placeholder","value","onChange","target","xmlns","fill","viewBox","strokeWidth","stroke","style","width","height","strokeLinecap","strokeLinejoin","d","_c","$RefreshReg$"],"sources":["E:/Employee Timesheet chatbot/frontend/src/components/ChatPage/ChatPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './ChatPage.css'; \r\nimport ChatMessage from '../ChatMessage/ChatMessage';\r\nimport UploadButton from '../UploadButton/UploadButton'; \r\n\r\nconst API_BASE_URL = 'http://127.0.0.1:5000';\r\n\r\nconst ChatPage = ({ user, sessionToken, onSignOut }) => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const chatEndRef = useRef(null);\r\n\r\n    // Scroll to the bottom of the chat area when messages change\r\n    useEffect(() => {\r\n        chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [messages]);\r\n\r\n    // Fetch chat history on component mount\r\n    useEffect(() => {\r\n        if (sessionToken) {\r\n            fetchChatHistory();\r\n        }\r\n    }, [sessionToken]);\r\n\r\n    const fetchChatHistory = async () => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/chat_history`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${sessionToken}`\r\n                }\r\n            });\r\n            if (response.status === 401) { onSignOut(); return; }\r\n            if (!response.ok) { throw new Error(\"Failed to fetch history.\"); }\r\n            const data = await response.json();\r\n            setMessages(data.history || []);\r\n        } catch (error) {\r\n            console.error(\"Error fetching chat history:\", error);\r\n            setError(\"Could not load chat history.\");\r\n        }\r\n    };\r\n    \r\n    const handleSendMessage = async (e) => {\r\n        e.preventDefault();\r\n        const userQuery = input.trim();\r\n        if (!userQuery || isLoading || !sessionToken) return;\r\n\r\n        setIsLoading(true);\r\n        setInput('');\r\n        setError('');\r\n\r\n        const newMessage = { sender: 'user', text: userQuery, timestamp: new Date().toISOString() };\r\n        setMessages(prev => [...prev, newMessage]);\r\n\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/chat`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${sessionToken}`\r\n                },\r\n                body: JSON.stringify({ query: userQuery, timestamp: newMessage.timestamp }),\r\n            });\r\n\r\n            if (response.status === 401) { onSignOut(); return; }\r\n            \r\n            const data = await response.json();\r\n\r\n            if (!response.ok) { throw new Error(data.error || 'Failed to get response from chatbot.'); }\r\n\r\n            const botMessage = { sender: 'bot', text: data.answer, timestamp: new Date().toISOString() };\r\n            setMessages(prev => [...prev, botMessage]);\r\n\r\n        } catch (err) {\r\n            console.error(err);\r\n            setError(err.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleFileUpload = async (file) => {\r\n        if (isLoading || !sessionToken) return;\r\n        setIsLoading(true);\r\n        \r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        \r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/upload`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${sessionToken}`\r\n                },\r\n                body: formData,\r\n            });\r\n\r\n            if (response.status === 401) { onSignOut(); return; }\r\n            \r\n            const data = await response.json();\r\n\r\n            if (!response.ok) { throw new Error(data.error || 'File upload failed.'); }\r\n            \r\n            const botMessage = { sender: 'bot', text: data.message, timestamp: new Date().toISOString() };\r\n            setMessages(prev => [...prev, botMessage]);\r\n\r\n        } catch (err) {\r\n            console.error(err);\r\n            setError(err.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"chat-container\">\r\n            <div className=\"chat-card\">\r\n                <header className=\"chat-header\">\r\n                    <h1 className=\"chat-title\">Timesheet Chatbot</h1>\r\n                    <div className=\"user-controls\">\r\n                        <span className=\"user-info\">Logged in as: <strong>{user}</strong></span>\r\n                        <button onClick={onSignOut} className=\"signout-button\">\r\n                            Sign Out\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                <main className=\"chat-messages\">\r\n                    {messages.length === 0 && !isLoading ? (\r\n                        <div className=\"welcome-message\">\r\n                            <p>Hello **{user}**! Welcome to the Timesheet Chatbot. Upload a CSV file to begin asking questions about your data.</p>\r\n                        </div>\r\n                    ) : (\r\n                        messages.map((msg, index) => (\r\n                            <ChatMessage key={index} sender={msg.sender} text={msg.text} />\r\n                        ))\r\n                    )}\r\n                    {isLoading && <ChatMessage sender=\"bot\" text=\"Thinking...\" />}\r\n                    <div ref={chatEndRef} />\r\n                </main>\r\n\r\n                <footer className=\"chat-footer\">\r\n                     {error && <div className=\"chat-error\">{error}</div>}\r\n                    <div className=\"chat-input-form\"> {/* CRITICAL: Parent Flex Container */}\r\n                        <UploadButton onFileUpload={handleFileUpload} disabled={isLoading} /> \r\n                        \r\n                        <form onSubmit={handleSendMessage} className=\"chat-input-form-inner\">\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder={isLoading ? \"Processing, please wait...\" : \"Ask a question about the timesheet...\"}\r\n                                className=\"chat-input\"\r\n                                value={input}\r\n                                onChange={(e) => setInput(e.target.value)}\r\n                                disabled={isLoading}\r\n                            />\r\n                            <button type=\"submit\" className=\"send-button\" disabled={!input.trim() || isLoading}>\r\n                                {/* SVG for send icon */}\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" style={{width:'20px', height:'20px'}}>\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\" />\r\n                                </svg>\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}