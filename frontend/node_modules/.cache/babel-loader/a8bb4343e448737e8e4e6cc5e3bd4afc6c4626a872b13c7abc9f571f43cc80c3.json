{"ast":null,"code":"var _jsxFileName = \"E:\\\\Employee Timesheet chatbot\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithCustomToken, onAuthStateChanged, signInAnonymously, createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\nimport { getFirestore, doc, setDoc, collection, query, orderBy, onSnapshot } from 'firebase/firestore';\nimport ChatPage from './components/ChatPage/ChatPage.jsx';\nimport AuthPage from './components/AuthPage/AuthPage.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  // Define shared variables at the top level\n  const appId = typeof window.__app_id !== 'undefined' ? window.__app_id : 'default-app-id';\n  const firebaseConfig = typeof window.__firebase_config !== 'undefined' ? JSON.parse(window.__firebase_config) : {};\n  const initialAuthToken = typeof window.__initial_auth_token !== 'undefined' ? window.__initial_auth_token : null;\n  const [user, setUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [db, setDb] = useState(null);\n  const [auth, setAuth] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isLoadingAuth, setIsLoadingAuth] = useState(true);\n  const [authError, setAuthError] = useState('');\n  useEffect(() => {\n    if (firebaseConfig && Object.keys(firebaseConfig).length > 0) {\n      try {\n        const app = initializeApp(firebaseConfig);\n        const authInstance = getAuth(app);\n        const dbInstance = getFirestore(app);\n        setDb(dbInstance);\n        setAuth(authInstance);\n        const unsubscribe = onAuthStateChanged(authInstance, async authUser => {\n          if (authUser) {\n            setUser(authUser);\n            setUserId(authUser.uid);\n          } else {\n            setUser(null);\n            setUserId(null);\n            setMessages([]);\n          }\n          setIsLoadingAuth(false);\n        });\n        if (initialAuthToken) {\n          signInWithCustomToken(authInstance, initialAuthToken).catch(error => {\n            console.error(\"Error signing in with custom token:\", error);\n            signInAnonymously(authInstance).catch(anonError => {\n              console.error(\"Error signing in anonymously:\", anonError);\n            });\n          });\n        } else {\n          signInAnonymously(authInstance).catch(error => {\n            console.error(\"Error signing in anonymously:\", error);\n          });\n        }\n        return () => unsubscribe();\n      } catch (error) {\n        console.error(\"Firebase initialization failed:\", error);\n        setIsLoadingAuth(false);\n      }\n    } else {\n      setIsLoadingAuth(false);\n    }\n  }, [initialAuthToken, firebaseConfig]);\n  useEffect(() => {\n    if (db && userId) {\n      const chatHistoryQuery = query(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`), orderBy('timestamp'));\n      const unsubscribe = onSnapshot(chatHistoryQuery, snapshot => {\n        const history = snapshot.docs.map(doc => doc.data()).sort((a, b) => a.timestamp - b.timestamp);\n        setMessages(history);\n      }, error => {\n        console.error(\"Error fetching real-time chat history:\", error);\n      });\n      return () => unsubscribe();\n    }\n  }, [db, userId, appId]);\n\n  // Use useCallback to ensure handleAuthenticate has a stable reference to 'auth'\n  const handleAuthenticate = useCallback(async (email, password, isLogin) => {\n    if (!auth) {\n      setAuthError('Authentication service not available.');\n      return;\n    }\n    setLoading(true);\n    setAuthError('');\n    try {\n      if (isLogin) {\n        await signInWithEmailAndPassword(auth, email, password);\n      } else {\n        await createUserWithEmailAndPassword(auth, email, password);\n      }\n    } catch (err) {\n      setAuthError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [auth, setLoading, setAuthError]);\n  const handleSendMessage = async query => {\n    if (!query || !db || !userId) return;\n    const newUserMessage = {\n      sender: 'user',\n      text: query,\n      timestamp: Date.now()\n    };\n    setLoading(true);\n    try {\n      await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), newUserMessage);\n      const API_URL = \"http://127.0.0.1:5000/review\";\n      const response = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query\n        })\n      });\n      const data = await response.json();\n      const newBotMessage = {\n        sender: 'bot',\n        text: data.answer,\n        timestamp: Date.now()\n      };\n      await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), newBotMessage);\n    } catch (error) {\n      console.error(\"Error fetching bot response or saving to DB:\", error);\n      const errorMessage = {\n        sender: 'bot',\n        text: \"Sorry, I couldn't get a response. Please try again.\",\n        timestamp: Date.now()\n      };\n      await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleUpdate = async () => {\n    console.log(\"Update button clicked. This would typically trigger a file upload or data refresh.\");\n    const botUpdateMessage = {\n      sender: 'bot',\n      text: \"Update successful! File uploaded and data stored successfully.\",\n      timestamp: Date.now()\n    };\n    if (db && userId) {\n      await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), botUpdateMessage);\n    }\n  };\n  if (isLoadingAuth) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen bg-gray-900 text-white text-lg\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(AuthPage, {\n      handleAuthenticate: handleAuthenticate,\n      loading: loading,\n      error: authError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(ChatPage, {\n    messages: messages,\n    handleSendMessage: handleSendMessage,\n    loading: loading,\n    handleUpdate: handleUpdate,\n    userId: userId\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"0usUrNsFiNTIGpE0H1j9tSyU/TY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","initializeApp","getAuth","signInWithCustomToken","onAuthStateChanged","signInAnonymously","createUserWithEmailAndPassword","signInWithEmailAndPassword","getFirestore","doc","setDoc","collection","query","orderBy","onSnapshot","ChatPage","AuthPage","jsxDEV","_jsxDEV","App","_s","appId","window","__app_id","firebaseConfig","__firebase_config","JSON","parse","initialAuthToken","__initial_auth_token","user","setUser","messages","setMessages","loading","setLoading","db","setDb","auth","setAuth","userId","setUserId","isLoadingAuth","setIsLoadingAuth","authError","setAuthError","Object","keys","length","app","authInstance","dbInstance","unsubscribe","authUser","uid","catch","error","console","anonError","chatHistoryQuery","snapshot","history","docs","map","data","sort","a","b","timestamp","handleAuthenticate","email","password","isLogin","err","message","handleSendMessage","newUserMessage","sender","text","Date","now","API_URL","response","fetch","method","headers","body","stringify","json","newBotMessage","answer","errorMessage","handleUpdate","log","botUpdateMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/Employee Timesheet chatbot/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport {\r\n    getAuth,\r\n    signInWithCustomToken,\r\n    onAuthStateChanged,\r\n    signInAnonymously,\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword\r\n} from 'firebase/auth';\r\nimport {\r\n    getFirestore,\r\n    doc,\r\n    setDoc,\r\n    collection,\r\n    query,\r\n    orderBy,\r\n    onSnapshot\r\n} from 'firebase/firestore';\r\nimport ChatPage from './components/ChatPage/ChatPage.jsx';\r\nimport AuthPage from './components/AuthPage/AuthPage.jsx';\r\n\r\nconst App = () => {\r\n    // Define shared variables at the top level\r\n    const appId = typeof window.__app_id !== 'undefined' ? window.__app_id : 'default-app-id';\r\n    const firebaseConfig = typeof window.__firebase_config !== 'undefined' ? JSON.parse(window.__firebase_config) : {};\r\n    const initialAuthToken = typeof window.__initial_auth_token !== 'undefined' ? window.__initial_auth_token : null;\r\n    \r\n    const [user, setUser] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [db, setDb] = useState(null);\r\n    const [auth, setAuth] = useState(null);\r\n    const [userId, setUserId] = useState(null);\r\n    const [isLoadingAuth, setIsLoadingAuth] = useState(true);\r\n    const [authError, setAuthError] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (firebaseConfig && Object.keys(firebaseConfig).length > 0) {\r\n            try {\r\n                const app = initializeApp(firebaseConfig);\r\n                const authInstance = getAuth(app);\r\n                const dbInstance = getFirestore(app);\r\n                setDb(dbInstance);\r\n                setAuth(authInstance);\r\n\r\n                const unsubscribe = onAuthStateChanged(authInstance, async (authUser) => {\r\n                    if (authUser) {\r\n                        setUser(authUser);\r\n                        setUserId(authUser.uid);\r\n                    } else {\r\n                        setUser(null);\r\n                        setUserId(null);\r\n                        setMessages([]);\r\n                    }\r\n                    setIsLoadingAuth(false);\r\n                });\r\n\r\n                if (initialAuthToken) {\r\n                    signInWithCustomToken(authInstance, initialAuthToken).catch((error) => {\r\n                        console.error(\"Error signing in with custom token:\", error);\r\n                        signInAnonymously(authInstance).catch(anonError => {\r\n                            console.error(\"Error signing in anonymously:\", anonError);\r\n                        });\r\n                    });\r\n                } else {\r\n                    signInAnonymously(authInstance).catch(error => {\r\n                        console.error(\"Error signing in anonymously:\", error);\r\n                    });\r\n                }\r\n\r\n                return () => unsubscribe();\r\n            } catch (error) {\r\n                console.error(\"Firebase initialization failed:\", error);\r\n                setIsLoadingAuth(false);\r\n            }\r\n        } else {\r\n            setIsLoadingAuth(false);\r\n        }\r\n    }, [initialAuthToken, firebaseConfig]);\r\n\r\n    useEffect(() => {\r\n        if (db && userId) {\r\n            const chatHistoryQuery = query(\r\n                collection(db, `/artifacts/${appId}/users/${userId}/chat_history`),\r\n                orderBy('timestamp')\r\n            );\r\n\r\n            const unsubscribe = onSnapshot(chatHistoryQuery, (snapshot) => {\r\n                const history = snapshot.docs.map(doc => doc.data()).sort((a, b) => a.timestamp - b.timestamp);\r\n                setMessages(history);\r\n            }, (error) => {\r\n                console.error(\"Error fetching real-time chat history:\", error);\r\n            });\r\n\r\n            return () => unsubscribe();\r\n        }\r\n    }, [db, userId, appId]);\r\n\r\n    // Use useCallback to ensure handleAuthenticate has a stable reference to 'auth'\r\n    const handleAuthenticate = useCallback(async (email, password, isLogin) => {\r\n        if (!auth) {\r\n            setAuthError('Authentication service not available.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setAuthError('');\r\n        try {\r\n            if (isLogin) {\r\n                await signInWithEmailAndPassword(auth, email, password);\r\n            } else {\r\n                await createUserWithEmailAndPassword(auth, email, password);\r\n            }\r\n        } catch (err) {\r\n            setAuthError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [auth, setLoading, setAuthError]);\r\n\r\n    const handleSendMessage = async (query) => {\r\n        if (!query || !db || !userId) return;\r\n\r\n        const newUserMessage = { sender: 'user', text: query, timestamp: Date.now() };\r\n        setLoading(true);\r\n\r\n        try {\r\n            await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), newUserMessage);\r\n            \r\n            const API_URL = \"http://127.0.0.1:5000/review\";\r\n            const response = await fetch(API_URL, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ query }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            const newBotMessage = { sender: 'bot', text: data.answer, timestamp: Date.now() };\r\n            \r\n            await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), newBotMessage);\r\n        } catch (error) {\r\n            console.error(\"Error fetching bot response or saving to DB:\", error);\r\n            const errorMessage = { sender: 'bot', text: \"Sorry, I couldn't get a response. Please try again.\", timestamp: Date.now() };\r\n            await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), errorMessage);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdate = async () => {\r\n        console.log(\"Update button clicked. This would typically trigger a file upload or data refresh.\");\r\n        const botUpdateMessage = { sender: 'bot', text: \"Update successful! File uploaded and data stored successfully.\", timestamp: Date.now() };\r\n        if (db && userId) {\r\n             await setDoc(doc(collection(db, `/artifacts/${appId}/users/${userId}/chat_history`)), botUpdateMessage);\r\n        }\r\n    };\r\n\r\n    if (isLoadingAuth) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen bg-gray-900 text-white text-lg\">\r\n                Loading...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) {\r\n        return <AuthPage \r\n            handleAuthenticate={handleAuthenticate}\r\n            loading={loading}\r\n            error={authError}\r\n        />;\r\n    }\r\n\r\n    return (\r\n        <ChatPage\r\n            messages={messages}\r\n            handleSendMessage={handleSendMessage}\r\n            loading={loading}\r\n            handleUpdate={handleUpdate}\r\n            userId={userId}\r\n        />\r\n    );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}